[supervisord]
nodaemon=true
logfile=/var/log/supervisord.log
pidfile=/var/run/supervisord.pid
childlogdir=/var/log

[program:ttyd]
command=ttyd --port 7681 --interface 0.0.0.0 --writable /tmp/startup.sh
autostart=true
autorestart=true
stdout_logfile=/var/log/ttyd.log
stderr_logfile=/var/log/ttyd.err
priority=10

[program:chat-gateway]
command=/opt/gateway-venv/bin/python /opt/chat_gateway_mcp.py --http --port %(ENV_GATEWAY_PORT)s
autostart=true
autorestart=true
stdout_logfile=/var/log/gateway.log
stderr_logfile=/var/log/gateway.err
stderr_logfile_maxbytes=10MB
stdout_logfile_maxbytes=10MB
environment=CLAUDE_CODE_AVAILABLE="%(ENV_CLAUDE_CODE_AVAILABLE)s",OPENAI_API_KEY="%(ENV_OPENAI_API_KEY)s",OPENAI_MODEL="%(ENV_OPENAI_MODEL)s",CLAUDE_MODEL="%(ENV_CLAUDE_MODEL)s"
priority=20

[program:anse]
command=npx http-server /opt/anse -p 3000 --cors -c-1
autostart=%(ENV_CHAT_INTERFACE)s
autorestart=true
stdout_logfile=/var/log/anse.log
stderr_logfile=/var/log/anse.err
directory=/opt/anse
priority=30

[program:responsive-ui]
command=node /opt/ui/server.js
autostart=true
autorestart=true
stdout_logfile=/var/log/ui.log
stderr_logfile=/var/log/ui.err
priority=40

[group:claude-home]
programs=ttyd,chat-gateway,anse,responsive-ui
priority=999